<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>초등 한국사 영상 도감</title>
  <style>
    :root{
      --bg:#f7f8ff;
      --card:#ffffff;
      --ink:#222;
      --muted:#5b6470;
      --brand:#6a8cff;
      --brand-2:#ff9bbb;
      --brand-3:#ffd76a;
      --brand-4:#8ee0c5;
      --ring: #80a3ff55;
      --shadow: 0 10px 30px rgba(0,0,0,.08);
      --radius: 18px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family: ui-rounded, system-ui, -apple-system, "Segoe UI", Roboto, "Apple SD Gothic Neo", "Noto Sans KR", "Pretendard", sans-serif;
      color:var(--ink); background:linear-gradient(180deg,#fdfdff 0%, var(--bg) 60%);
    }
    a{color:inherit}
    .container{max-width:1200px; margin:0 auto; padding:20px 16px 96px}

    /* 헤더 */
    header{
      position:sticky; top:0; z-index:50; backdrop-filter:saturate(150%) blur(8px);
      background:linear-gradient(180deg, rgba(255,255,255,.9), rgba(255,255,255,.7));
      border-bottom:1px solid #e9ecff; 
    }
    .header-inner{max-width:1200px; margin:0 auto; padding:14px 16px; display:flex; gap:12px; align-items:center}
    .logo{display:flex; align-items:center; gap:10px; font-weight:900; letter-spacing:.2px}
    .logo-badge{width:36px;height:36px;border-radius:12px; display:grid; place-items:center; color:white; font-weight:900; box-shadow:var(--shadow);
      background: conic-gradient(from 220deg,var(--brand), var(--brand-2), var(--brand-3), var(--brand-4), var(--brand));}
    .title{font-size:18px}

    .search-wrap{margin-left:auto; display:flex; gap:8px; align-items:center}
    .search{width:min(420px, 56vw); display:flex; align-items:center; gap:8px; background:var(--card); padding:10px 12px; border-radius:999px; box-shadow:var(--shadow); border:1px solid #eef1ff}
    .search input{flex:1; border:0; outline:none; font-size:14px; background:transparent}
    .chip-row{display:flex; gap:8px; flex-wrap:wrap; padding:0 16px 12px; align-items:center}
    .chip{padding:8px 12px; border-radius:999px; border:1px solid #e9ecff; background:#fff; font-size:13px; cursor:pointer; user-select:none}
    .chip[aria-pressed="true"]{background:var(--brand); color:#fff; border-color:transparent}

    /* 섹션 */
    .era-section{margin:26px 0}
    .era-head{display:flex; align-items:center; gap:12px; margin-bottom:12px}
    .era-pill{display:inline-flex; align-items:center; gap:8px; padding:8px 12px; border-radius:999px; background:var(--card); border:1px solid #e9ecff; box-shadow:var(--shadow)}
    .era-pill i{width:8px; height:8px; border-radius:999px; display:inline-block}
    .era-title{font-weight:800}
    .era-desc{color:var(--muted); font-size:13px}

    .grid{display:grid; grid-template-columns:repeat(12,1fr); gap:16px}
    .col{grid-column: span 12}
    @media (min-width:560px){.col{grid-column: span 6}}
    @media (min-width:900px){.col{grid-column: span 3}}

    /* 카드 */
    .card{background:var(--card); border:1px solid #eef1ff; border-radius:var(--radius); overflow:hidden; box-shadow:var(--shadow); display:flex; flex-direction:column}
    .thumb-wrap{position:relative; aspect-ratio:16/9; background:#f2f6ff}
    .thumb{width:100%; height:100%; object-fit:cover; display:block}
    .play{position:absolute; inset:auto auto 10px 10px; padding:8px 10px; border-radius:12px; background:rgba(34,34,34,.8); color:#fff; font-size:12px}
    .badge{position:absolute; inset:10px 10px auto auto; padding:6px 8px; border-radius:8px; background:#fff; border:1px solid #eef1ff; font-size:12px}
    .card-body{padding:12px 12px 14px}
    .card-title{font-weight:700; line-height:1.3}
    .card-meta{color:var(--muted); font-size:12px; margin-top:4px}

    /* 모달 */
    .modal{position:fixed; inset:0; display:none; align-items:center; justify-content:center; background:rgba(17,23,40,.65)}
    .modal[open]{display:flex}
    .dialog{background:#000; width:min(960px,92vw); border-radius:16px; overflow:hidden; box-shadow:var(--shadow)}
    .dialog-head{display:flex; align-items:center; justify-content:space-between; padding:10px 12px; background:linear-gradient(180deg,#0e1428,#121a33); color:#cbd5ff}
    .dialog-title{font-weight:700; font-size:14px}
    .close{appearance:none; border:0; background:#202a4d; color:#cbd5ff; padding:8px 10px; border-radius:10px; cursor:pointer}
    .frame-wrap{aspect-ratio:16/9; background:#000}
    .frame{width:100%; height:100%; border:0}

    /* 접근성 */
    :focus-visible{outline:3px solid var(--ring); outline-offset:2px}
    @media (prefers-reduced-motion: reduce){
      *{scroll-behavior:auto; transition:none !important; animation:none !important}
    }
    .sr-only{position:absolute; width:1px;height:1px;clip:rect(0 0 0 0);white-space:nowrap;overflow:hidden}

    /* 하단 도움말 */
    .help{margin-top:32px; color:#6b7280; font-size:12px}
  </style>
</head>
<body>
  <a class="sr-only" href="#main">본문으로 건너뛰기</a>
  <header>
    <div class="header-inner">
      <div class="logo" aria-label="초등 한국사 영상 도감">
        <div class="logo-badge">史</div>
        <div class="title">초등 한국사 영상 도감</div>
      </div>
      <div class="search-wrap" role="search">
        <div class="search" aria-label="시대/제목 검색">
          <input id="q" type="search" placeholder="시대나 제목으로 검색하기… (예: 삼국, 조선)" />
          <button class="btn" id="clearBtn" aria-label="검색 지우기">지우기</button>
        </div>
      </div>
    </div>
    <div class="chip-row" id="chipRow" aria-label="시대 빠른 필터"></div>
  </header>

  <main id="main" class="container">
    <div id="sections"></div>

    <section class="help" aria-labelledby="tip-title">
      <h2 id="tip-title">관리자 안내</h2>
      <ul>
        <li><code>DATA</code>의 <code>videoId</code>를 실제 유튜브 ID로 바꾸면 바로 썸네일과 재생이 됩니다.</li>
        <li>썸네일은 <code>https://i.ytimg.com/vi/VIDEO_ID/hqdefault.jpg</code> 규칙으로 자동 로딩됩니다.</li>
        <li>새 영상은 <code>DATA</code> 배열에 항목을 추가하면 됩니다. (JS가 자동 렌더링)</li>
      </ul>
    </section>
  </main>

  <!-- 모달 -->
  <div class="modal" id="playerModal" role="dialog" aria-modal="true" aria-labelledby="dialogTitle">
    <div class="dialog">
      <div class="dialog-head">
        <div class="dialog-title" id="dialogTitle">영상 재생</div>
        <button class="close" id="closeModal" aria-label="닫기 (ESC)">닫기 ✕</button>
      </div>
      <div class="frame-wrap">
        <iframe id="player" class="frame" title="YouTube player" allow="autoplay; encrypted-media" allowfullscreen></iframe>
      </div>
    </div>
  </div>

  <script>
    const DATA = [
      { eraKey: 'prehistoric', eraName: '선사 시대', color: 'var(--brand-4)', desc: '구석기·신석기·청동기',
        videos: [
          { title: '구석기 시대 사람들의 생활', videoId: 'VIDEO_ID_1', channel: '샘플 채널', duration: '7:12' },
          { title: '신석기 혁명, 무엇이 달라졌을까?', videoId: 'VIDEO_ID_2', channel: '샘플 채널', duration: '5:44' }
        ] },
      { eraKey: 'threeKingdoms', eraName: '삼국 시대', color: 'var(--brand)', desc: '고구려·백제·신라',
        videos: [
          { title: '삼국의 탄생과 성장', videoId: 'VIDEO_ID_5', channel: '샘플 채널', duration: '9:10' }
        ] }
    ];

    const $ = (sel, el=document) => el.querySelector(sel);
    const $$ = (sel, el=document) => Array.from(el.querySelectorAll(sel));

    function imgFor(videoId){
      return `https://i.ytimg.com/vi/${videoId}/hqdefault.jpg`;
    }

    const sections = $('#sections');
    const chipRow = $('#chipRow');

    function renderAll(){
      chipRow.innerHTML = ['전체', ...DATA.map(d=>d.eraName)]
        .map((name, idx)=>`<button class="chip" role="switch" aria-pressed="${idx===0}" data-era="${idx===0? 'ALL': name}">${name}</button>`)
        .join('');

      sections.innerHTML = DATA.map(d=>{
        const head = `<div class="era-head"><span class="era-pill" style="border-color:${d.color}"><i style="background:${d.color}"></i><span class="era-title">${d.eraName}</span></span><span class="era-desc">${d.desc}</span></div>`;
        const cards = d.videos.map(v=>cardTpl(d, v)).join('');
        return `<section id="era-${d.eraKey}" class="era-section"><div class="grid">${head}${cards}</div></section>`;
      }).join('');
    }

    function cardTpl(era, v){
      return `<div class="col"><article class="card" data-era="${era.eraName}" data-title="${v.title}"><div class="thumb-wrap"><img class="thumb" loading="lazy" alt="${v.title} 썸네일" src="${imgFor(v.videoId)}"><span class="badge" style="border-color:${era.color}">${v.duration}</span><button class="play" data-video="${v.videoId}" aria-label="${v.title} 재생">▶ 재생</button></div><div class="card-body"><div class="card-title">${v.title}</div><div class="card-meta">${era.eraName} · ${v.channel}</div></div></article></div>`;
    }

    renderAll();

    const q = $('#q');
    const clearBtn = $('#clearBtn');
    chipRow.addEventListener('click', (e)=>{
      const btn = e.target.closest('.chip');
      if(!btn) return;
      $$('.chip').forEach(c=>c.setAttribute('aria-pressed','false'));
      btn.setAttribute('aria-pressed','true');
      filter();
    });

    q.addEventListener('input', filter);
    clearBtn.addEventListener('click', ()=>{q.value=''; filter(); q.focus();});

    function filter(){
      const text = q.value.trim().toLowerCase();
      const active = $('.chip[aria-pressed="true"]').dataset.era;
      $$('#sections .card').forEach(card=>{
        const eraName = card.dataset.era;
        const title = card.dataset.title.toLowerCase();
        const okEra = (active==='ALL') || (active===eraName);
        const okText = !text || eraName.includes(text) || title.includes(text);
        card.closest('.col').style.display = (okEra && okText) ? '' : 'none';
      });
    }

    const modal = $('#playerModal');
    const player = $('#player');
    const closeModal = $('#closeModal');

    document.addEventListener('click', (e)=>{
      const playBtn = e.target.closest('.play');
      if(playBtn){
        const id = playBtn.dataset.video;
        const title = playBtn.closest('.card').dataset.title;
        $('#dialogTitle').textContent = title;
        openPlayer(id);
      }
    });

    function openPlayer(videoId){
      player.src = `https://www.youtube.com/embed/${videoId}?autoplay=1&rel=0`;
      modal.setAttribute('open','');
    }
    function hidePlayer(){
      modal.removeAttribute('open');
      player.src = '';
    }

    closeModal.addEventListener('click', hidePlayer);
    modal.addEventListener('click', (e)=>{ if(e.target === modal) hidePlayer(); });
    window.addEventListener('keydown', (e)=>{ if(e.key==='Escape' && modal.hasAttribute('open')) hidePlayer(); });
  </script>
</body>
</html>
